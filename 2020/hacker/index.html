<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="keywords" content="逆向破解今日校园app加密值,个人网站，个人博客，meethigher，学习，生活"><meta name="description" content="我之前写的那个今日校园的签到脚本，是需要抓包的，昨天帮人部署的时候，我就看着那个加密值发呆…这个加密值我尝试多种方式，都获取不到，只有提交的时候，才能获取到，有点玄学啊…"><title>逆向破解今日校园app加密值</title><link rel="shortcut icon" href="/blog/images/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/meethigher/cdn@9.0/css/meethigher-font.css"><link rel="stylesheet" href="/blog/css/index.css"></head><body><header class="header"><div class="header-menu"><span class="fa fa-bars"></span></div><div class="header-search"><span class="fa fa-search"></span></div><div class="header-title"><a href="/">言成言成啊<span class="header-subtitle"> | Kit Chen&#39;s Blog</span></a></div><ul class="header-navbar clearFix"><li><a href="/blog/">主页</a></li><li><a href="/blog/tags">标签</a></li><li><a href="/blog/archives">归档</a></li><li><a href="/blog/about">关于</a></li></ul></header><div id="particles-js"></div><script src="https://cdn.jsdelivr.net/gh/meethigher/cdn@9.0/js/particles.min.js"></script><script src="https://cdn.jsdelivr.net/gh/meethigher/cdn@9.0/js/app.js"></script><div class="search" title="站内搜索"><span class="fa fa-search"></span></div><div class="tool"><div class="up" title="返回顶部"><span class="fa fa-long-arrow-up"></span></div><div class="down" title="返回底部"><span class="fa fa-long-arrow-down"></span></div><a href="/blog/app.apk" class="app" title="下载App" download="app.apk"><span class="fa fa-android"></span></a></div><main class="main"><div class="main-content"><article class="post"><div class="post-title"><h2 class="title">逆向破解今日校园app加密值</h2></div><div class="post-content blog-markdown"><p>先给各位看张图（我在一个android学习群里见别人发的）。如果能有反思，那说明你是一个不会动脑的开发者；如果产生了共鸣，说明你是个会动脑的开发者；如果啥感觉也没有，那你可能就是个打酱油的。</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/hacker/1.png" title="如何问问题"><p>写这篇文章的原因，也是因为我看网上这类教程的帖子很少，网上各式各样今日校园签到脚本已经遍地开花。但是他们没有过程，就直接模拟登录，提交，完成（一看就是抄的别人的东西）。对于加密值的加解密，他们的处理方法都是出自同一个大佬的代码，直接拿来就用的。</p><p>很幸运，我找到了原大佬。大佬只留了一句话“加密值是逆向apk后得到的，本质上是一个json对象进行了des加密，然后编码为了Base64字符串”，</p><p>我觉得一个牛逼的开发者，不需要别人给太多指点，只需一个思路，那就足够了。我希望我成为一个牛逼的开发者。</p><p>这句话的关键词就是<strong>逆向</strong>，由此引发了我的一系列探索。诞生了这篇文章</p><p>授人以鱼不如授人以渔，站在巨人的肩膀上，我将我自己整理的思路再分享给各位。</p><h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>我尝试各种方式获取加密值，包括登录时，发帖子时，私聊时，但是都没有那个加密值，只有在提交的时候，才有。</p><p>我就有点纳闷了。</p><h2 id="反编译工具"><a href="#反编译工具" class="headerlink" title="反编译工具"></a>反编译工具</h2><p>由此尝试反编译apk，今日校园新版提升了安全机制，并且被加固过了。所以需要找历史版本，就拿8.0.6来说吧，因为我用的这个。</p><p>三个必备的工具</p><ol><li><a href="https://ibotpeaches.github.io/Apktool/" target="_blank" rel="noopener">apktool</a></li><li><a href="https://github.com/pxb1988/dex2jar" target="_blank" rel="noopener">dex2jar</a></li><li><a href="http://java-decompiler.github.io/" target="_blank" rel="noopener">jd-gui</a></li></ol><h2 id="具体过程"><a href="#具体过程" class="headerlink" title="具体过程"></a>具体过程</h2><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/hacker/2.png"><p>个人建议，三款工具，像我这样放置，会好一点</p><h3 id="apktool"><a href="#apktool" class="headerlink" title="apktool"></a>apktool</h3><p>具体使用过程，请参照<a href="https://ibotpeaches.github.io/Apktool/documentation/" target="_blank" rel="noopener">官方文档</a></p><p>首先找到你使用的app的apk文件，放置到该目录下，运行以下命令，进行decode</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apktool.jar d name.apk</span><br></pre></td></tr></table></figure><p>此时，会在目录下，生成相应的文件夹，里面的res是存放的资源文件和布局文件，但是你打开，可能会发现里面并没有我们要的classes.dex，而是一堆smali文件。</p><p>所以，我们需要再build一下</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apktool.jar b name</span><br></pre></td></tr></table></figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/hacker/3.png"><h3 id="dex2jar"><a href="#dex2jar" class="headerlink" title="dex2jar"></a>dex2jar</h3><p>将我们需要进行反编译的.dex文件，移动到其根目录下，用以下命令重新打成jar包</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d2j-dex2jar.bat classes.dex</span><br></pre></td></tr></table></figure><blockquote><p>我个人理解</p><p>dex2jar是将.dex转成.jar，jar2dex正好相反</p></blockquote><p>由此，我们会生成与.dex相对应的.jar，我已经将其剪切到桌面，为了方便处理</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/hacker/4.png"><h3 id="jd-gui"><a href="#jd-gui" class="headerlink" title="jd-gui"></a>jd-gui</h3><p>打开这个图形界面工具，双击或者命令行输入</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">java </span>-<span class="keyword">jar </span><span class="keyword">jd-gui.jar</span></span><br></pre></td></tr></table></figure><p>依次打开指定的jar包，找你所需要的东西，我感觉这个过程应该是极费时间的。</p><p>然后找到了8.0.6版的加密代码以及加密密钥</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/hacker/5.png"><p>从图片上，我们知道这是通过ate.V进行加密的，然后继续找。</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/hacker/6.png"><p>有了加密密钥，和加密的方式，接下来，我们就可以对其进行解密。</p><h1 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h1><ol><li><a href="https://blog.csdn.net/qq_33608000/article/details/105372889" target="_blank" rel="noopener">逆向破解-APK反编译工具与使用</a></li><li><a href="https://github.com/ZimoLoveShuang/auto-submit" target="_blank" rel="noopener">ZimoLoveShuang</a></li><li><a href="https://blog.csdn.net/android_LvQi/article/details/79030127" target="_blank" rel="noopener">apk反编译</a></li><li><a href="https://blog.suqir.xyz/2020/03/25/%E4%BB%8A%E6%97%A5%E6%A0%A1%E5%9B%AD%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0/" target="_blank" rel="noopener">今日校园自动签到</a></li></ol><p>通过这次亲自尝试反编译，让我更加确信，目前网络上遍地开花的那些代码，基本上都是围绕我致谢中的2和4这俩大佬展开的。这俩才是真大佬，我已经将他们博客收录到我<a href="https://meethigher.top/blog/2020/blogs">置顶文章</a>里了</p><p>为什么呢？</p><p>因为每个版本的apk反编译之后，加密值都是不一样的，像我用的8.0.6版本的加密密钥就是XCE927==，而网上那成片成片的都是ST83=@XV。总不能每个人用的app都是同一个版本的吧，很明显，就是直接抄了别人的解密算法。</p><p>总之，通过这次反编译，收获还是有的，有了值得我尊重的人，当然也有鄙视的人（大片大片的抄袭狗，尤其是那些，抄了别人代码，连个来源都不打的人）。</p></div><div class="post-detail">发布：2020-06-11 06:26:50<br>修改：2020-06-15 11:55:33<br>链接：<span class="shareUrl">https://meethigher.top/blog/2020/hacker/</span><br>标签：<span><a href="/blog/tags/open/">open</a>&nbsp;<a href="/blog/tags/hacker/">hacker</a>&nbsp;<a href="/blog/tags/android/">android</a>&nbsp;</span></div><div class="post-btn"><img no-lazy src="/blog/images/alipay.png" style="display:none" alt="付款码"> <span class="post-donation-btn">捐助</span> <span class="post-share-btn">分享</span></div><div class="post-comment"><span class="instruction">翻墙之后才能评论哦</span><div id="gitalk-container"></div></div><link rel="stylesheet" href="/blog/css/gitalk.css"><script src="/blog/js/gitalk.js"></script><script type="text/javascript">var gitalk=new Gitalk({clientID:"84249c02e216e3ce376a",clientSecret:"a032ae7096d026eff848b5815da5afde341e9ffd",repo:"meethigher.github.io",owner:"meethigher",admin:["meethigher"],id:location.pathname,distractionFreeMode:"true"});gitalk.render("gitalk-container")</script><div class="busuanzi"><span id="busuanzi_container_page_pv">阅读量<span id="busuanzi_value_page_pv"></span>次</span><script defer src="/blog/js/busuanzi.js"></script></div></article><div class="outline" title="目录"><span class="fa fa-list-alt"></span></div></div></main><script src="https://cdn.jsdelivr.net/gh/meethigher/cdn@9.0/js/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/meethigher/cdn@11/js/layer/layer.js"></script><script src="https://cdn.jsdelivr.net/gh/meethigher/cdn@13/js/instantpage.js"></script><script src="/blog/js/meethigher.js"></script><script>let imgs = $(".post-content.blog-markdown img");imgs.css("width", "100%");</script><script>window.imageLazyLoadSetting={isSPA:!1,processImages:null}</script><script>window.addEventListener("load",function(){var a=/\.(gif|jpg|jpeg|tiff|png)$/i,e=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll(".blog-markdown img[data-original]")).forEach(function(t){var r=t.parentNode;"A"===r.tagName&&(r.href.match(a)||r.href.match(e))&&(r.href=t.dataset.original)})})</script><script>!function(t){function e(){n&&(o=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var e,i,r=0;r<o.length;r++)e=o[r],0<=(i=e.getBoundingClientRect()).bottom&&0<=i.left&&i.top<=(t.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,n,i,a=o[r];t=a,e=function(){o=o.filter(function(t){return a===t&&t.removeAttribute("style"),a!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}()}t.imageLazyLoadSetting.processImages=e;var n=t.imageLazyLoadSetting.isSPA,o=Array.prototype.slice.call(document.querySelectorAll(".blog-markdown img[data-original]"));e(),t.addEventListener("scroll",function(){var n,o;n=e,o=t,clearTimeout(n.tId),n.tId=setTimeout(function(){n.call(o)},500)})}(this)</script></body></html>