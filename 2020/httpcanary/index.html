<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="keywords" content="来自穷逼对HttpCanary的蹂躏,个人网站，个人博客，meethigher，学习，生活"><meta name="description" content="HttpCanary一直强制升级，国内又禁止翻墙，我只能如此了"><title>来自穷逼对HttpCanary的蹂躏</title><link rel="shortcut icon" href="/blog/images/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/meethigher/cdn@9.0/css/meethigher-font.css"><link rel="stylesheet" href="/blog/css/index.css"></head><body><header class="header"><div class="header-menu"><span class="fa fa-bars"></span></div><div class="header-search"><span class="fa fa-search"></span></div><div class="header-title"><a href="/">言成言成啊<span class="header-subtitle"> | Kit Chen&#39;s Blog</span></a></div><ul class="header-navbar clearFix"><li><a href="/blog/">主页</a></li><li><a href="/blog/tags">标签</a></li><li><a href="/blog/archives">归档</a></li><li><a href="/blog/about">关于</a></li></ul></header><div id="particles-js"></div><script src="https://cdn.jsdelivr.net/gh/meethigher/cdn@9.0/js/particles.min.js"></script><script src="https://cdn.jsdelivr.net/gh/meethigher/cdn@9.0/js/app.js"></script><div class="search" title="站内搜索"><span class="fa fa-search"></span></div><div class="tool"><div class="up" title="返回顶部"><span class="fa fa-long-arrow-up"></span></div><div class="down" title="返回底部"><span class="fa fa-long-arrow-down"></span></div><a href="/blog/app.apk" class="app" title="下载App" download="app.apk"><span class="fa fa-android"></span></a></div><main class="main"><div class="main-content"><article class="post"><div class="post-title"><h2 class="title">来自穷逼对HttpCanary的蹂躏</h2></div><div class="post-content blog-markdown"><p>主要是，我经常用到HttpCanary，目前最新版的是3.3.6，而我用的是3.1.5，一直提示让我更新，不更新不给用。</p><p>我尝试反编译了，但是人家有360加固，没得办法。</p><p>最后，实在受不了，就想到android能不能像pc一样，设置hosts屏蔽指定的站点。</p><p>由此就有了下面的一系列尝试。</p><h1 id="一、屏蔽host"><a href="#一、屏蔽host" class="headerlink" title="一、屏蔽host"></a>一、屏蔽host</h1><p>首先，每次打开，app会有提示</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/httpcanary/1.png"><p>然后，我就想着，那我抓个包，看看他获取更新的<a href="https://raw.githubusercontent.com/MegatronKing/HttpCanary/master/config/premium/version.json" target="_blank" rel="noopener">链接地址</a>。</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/httpcanary/2.png"><p>访问一下链接，原来，他更新是通过一串json代码来对比版本号的。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"min"</span>: <span class="string">"3.3.0"</span>,</span><br><span class="line">    <span class="attr">"latest"</span>: <span class="string">"3.3.5"</span>,</span><br><span class="line">    <span class="attr">"url"</span>: <span class="string">"https://httpcanary.com/app/httpcanary_premium_v3.3.5.apk"</span>,</span><br><span class="line">    <span class="attr">"en_notes"</span>: <span class="string">" • Important: The 3.2.x version was expired, please upgrade to v3.3+.\n • New features: search, sort and multi selection.\n • New features: batch save, zip save and batch add black/white list.\n • Refactor filter and record save.\n • Redesign icons in list and title texts.\n • Fixed the long loading issue.\n • Fixed the issue where the sub menu icon is invisible.\n • Fixed certificate installation issue.\n • Minor bugfixes and other improvements.\n"</span>,</span><br><span class="line">    <span class="attr">"zh_notes"</span>: <span class="string">" • 重要：3.2.x版本已失效，请升级至3.3.x以上版本。\n • 新增全局搜索、排序、多选等功能。\n • 新增批量保存、压缩保存、批量添加黑白名单等功能。\n • 重构和优化过滤、保存功能。\n • 重新设计列表非应用类Icon、标题栏内容等样式。\n • 修复启动加载时间过长的bug。\n • 修复标题栏子菜单图标不显示的bug。\n • 修复安装证书横竖屏切换等场景出现无限循环安装证书的bug。\n • 其它细节问题修复和优化。\n"</span>,</span><br><span class="line">    <span class="attr">"md5"</span>: <span class="string">"49c4ddbb2bafd7150a49cdbe35443744"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>其实也可以通过静态注入，将返回的最低版本3.3.0修改成低版本，就不会强制退出了。不过需要一直开着抓包软件，进行静态注入，就很麻烦，不如直接hosts屏蔽。</p></blockquote><p>接下来，手机进行修改hosts，路径是<code>/system/etc/hosts</code></p><p>我尝试用MT管理器直接进行修改，但是没法保存，提示<code>failed on &#39;/etc/hosts&#39; - Device or resource busy</code></p><p>后来发现，用命令终端是可以的。还是用MT管理器，左侧找到终端模拟器</p><p>具体命令</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su</span><br></pre></td></tr></table></figure><p>su是为了获取root权限</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /system/etc/hosts</span><br></pre></td></tr></table></figure><p>然后键盘点i进入编辑模式，编辑完了之后，按esc，输入<code>:wq</code>进行保存</p><blockquote><p>如果提示hosts readonly的话，打开Magisk Manager里面的Systemless hosts即可。</p></blockquote><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/httpcanary/3.png"><p>如此就ok了。</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/httpcanary/4.png"><p>最后如何测试呢？</p><p>修改之后，再次访问<a href="https://raw.githubusercontent.com/MegatronKing/HttpCanary/master/config/premium/version.json" target="_blank" rel="noopener">该链接地址</a></p><p>会直接提示，无法打开</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/httpcanary/5.png"><h1 id="二、修改hosts文件权限"><a href="#二、修改hosts文件权限" class="headerlink" title="二、修改hosts文件权限"></a>二、修改hosts文件权限</h1><p>还是用命令行，在用<code>su</code>获取root权限的情况下，执行下面的代码</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod <span class="number">666</span> /system/etc/hosts</span><br></pre></td></tr></table></figure><p>意思就是授予hosts文件所有权限</p><blockquote><p>666表示所有者、用户组、其他都有读写权限</p></blockquote></div><div class="post-detail">发布：2020-09-16 20:33:38<br>修改：2020-09-16 22:21:55<br>链接：<span class="shareUrl">https://meethigher.top/blog/2020/httpcanary/</span><br>标签：<span><a href="/blog/tags/android/">android</a>&nbsp;</span></div><div class="post-btn"><img no-lazy src="/blog/images/alipay.png" style="display:none" alt="付款码"> <span class="post-donation-btn">捐助</span> <span class="post-share-btn">分享</span></div><div class="busuanzi"><span id="busuanzi_container_page_pv">阅读量<span id="busuanzi_value_page_pv"></span>次</span><script defer src="/blog/js/busuanzi.js"></script></div></article><div class="outline" title="目录"><span class="fa fa-list-alt"></span></div></div></main><script src="https://cdn.jsdelivr.net/gh/meethigher/cdn@9.0/js/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/meethigher/cdn@11/js/layer/layer.js"></script><script src="https://cdn.jsdelivr.net/gh/meethigher/cdn@13/js/instantpage.js"></script><script src="/blog/js/meethigher.js"></script><script>let imgs = $(".post-content.blog-markdown img");imgs.css("width", "100%");</script><script>window.imageLazyLoadSetting={isSPA:!1,processImages:null}</script><script>window.addEventListener("load",function(){var a=/\.(gif|jpg|jpeg|tiff|png)$/i,e=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll(".blog-markdown img[data-original]")).forEach(function(t){var r=t.parentNode;"A"===r.tagName&&(r.href.match(a)||r.href.match(e))&&(r.href=t.dataset.original)})})</script><script>!function(t){function e(){n&&(o=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var e,i,r=0;r<o.length;r++)e=o[r],0<=(i=e.getBoundingClientRect()).bottom&&0<=i.left&&i.top<=(t.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,n,i,a=o[r];t=a,e=function(){o=o.filter(function(t){return a===t&&t.removeAttribute("style"),a!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}()}t.imageLazyLoadSetting.processImages=e;var n=t.imageLazyLoadSetting.isSPA,o=Array.prototype.slice.call(document.querySelectorAll(".blog-markdown img[data-original]"));e(),t.addEventListener("scroll",function(){var n,o;n=e,o=t,clearTimeout(n.tId),n.tId=setTimeout(function(){n.call(o)},500)})}(this)</script></body></html>