<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="keywords" content="开源住房公积金系统,个人网站，个人博客，meethigher，学习，生活"><meta name="description" content="最近有个课程设计，做个住房公积金系统，从6月27号开始做，记录过程。"><title>开源住房公积金系统</title><link rel="shortcut icon" href="/blog/images/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/meethigher/cdn@9.0/css/meethigher-font.css"><link rel="stylesheet" href="/blog/css/index.css"></head><body><header class="header"><div class="header-menu"><span class="fa fa-bars"></span></div><div class="header-search"><span class="fa fa-search"></span></div><div class="header-title"><a href="/">言成言成啊<span class="header-subtitle"> | Kit Chen&#39;s Blog</span></a></div><ul class="header-navbar clearFix"><li><a href="/blog/">主页</a></li><li><a href="/blog/tags">标签</a></li><li><a href="/blog/archives">归档</a></li><li><a href="/blog/about">关于</a></li></ul></header><div id="particles-js"></div><script src="https://cdn.jsdelivr.net/gh/meethigher/cdn@9.0/js/particles.min.js"></script><script src="https://cdn.jsdelivr.net/gh/meethigher/cdn@9.0/js/app.js"></script><div class="search" title="站内搜索"><span class="fa fa-search"></span></div><div class="tool"><div class="up" title="返回顶部"><span class="fa fa-long-arrow-up"></span></div><div class="down" title="返回底部"><span class="fa fa-long-arrow-down"></span></div><a href="/blog/app.apk" class="app" title="下载App" download="app.apk"><span class="fa fa-android"></span></a></div><main class="main"><div class="main-content"><article class="post"><div class="post-title"><h2 class="title">开源住房公积金系统</h2></div><div class="post-content blog-markdown"><p>手速太快，用idea的时候，经常会弹出全局搜索，很烦。</p><p><a href="https://github.com/meethigher/house-fund" target="_blank" rel="noopener">代码地址</a></p><p><code>ctrl+shift+a</code>打开搜索框输入<code>registry</code>，点击进入之后，将<code>ide.suppress.double.click.handler</code>打上对号，表示禁用，<code>close</code>即可。</p><p>说点题外话，跑步的时候，配周杰伦的《稻香》；写代码的时候，配罗志祥的《精舞门》，简直燃得不要不要的，踩点到极致。</p><p>最近，也在回顾《极限挑战》，在节目中，罗志祥经常照顾张艺兴，还是很暖的。虽然罗志祥私生活确实不咋地，但是说实话，他这首精舞门真的很燃。我还是很欣赏他对音乐的态度的。</p><h1 id="一、27号进度"><a href="#一、27号进度" class="headerlink" title="一、27号进度"></a>一、27号进度</h1><p>登录功能</p><ul><li>账号密码报错提示</li><li>验证码报错提示</li></ul><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/house-fund/1.png"><h1 id="二、28号进度"><a href="#二、28号进度" class="headerlink" title="二、28号进度"></a>二、28号进度</h1><p>今天上午家里升级宽带，由50M网线升级成了100M光纤，一年360。交了13个月的，收了400，应该10块钱是安装费了。50M的时候，封顶能跑个2m/s，现在能跑个4m/s，用的铁通宽带，是真的有点垃圾。</p><p>说说今天进度。</p><ol><li>登录功能：<ul><li>顶号处理（通过ServletContext设置username为键，sessionid为值，登录时，会自动更新，判断当前的username的sessionid是否与获取的一致。若一致，登录成功；否则，登录失败）</li></ul></li><li>修改管理员密码功能：<ul><li>修改结果提示</li></ul></li></ol><p>通过jsp获取当前页面，来决定哪个标签是active</p><p>总览页面</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/house-fund/2.png"><p>单位页面</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/house-fund/3.png"><h1 id="三、29号进度"><a href="#三、29号进度" class="headerlink" title="三、29号进度"></a>三、29号进度</h1><p>完成功能：</p><ol><li>优化登录验证码</li><li>单位开户页面：<ul><li>类型输入框采用下拉菜单</li><li>部分输入限制，采用<a href="https://blog.csdn.net/sirobot/article/details/101030392" target="_blank" rel="noopener">js正则表达式</a>，注册按键松开事件，用正则替换掉不符要求的内容</li></ul></li><li>单位开户</li></ol><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/house-fund/4.png"><h1 id="四、30号没进度"><a href="#四、30号没进度" class="headerlink" title="四、30号没进度"></a>四、30号没进度</h1><p>今天基本上没啥进度。</p><p>上午上课，特么的，一上课就头疼，老师给我的感觉就是她自己都不会。我就纳闷了，现在的老师，是连备课的习惯都没有了吗？</p><p>讲着讲着就卡壳了，我认为好的老师，至少带着学生完整的过一遍例子吧？她直接拿上节课的例子接着写，你知道那是啥样式吗？</p><p>讲注解，所有的结果都运行在一个jsp页面上，密密麻麻的，服了。</p><p>下午，整了整seo，我不知道为啥我这个这么难收录，26号提交的百度和谷歌，结果一个也没有收录，头疼。顺便又优化了一下网页的关键字跟描述。</p><p>喂鸡喂鸭喂鹅，洗澡、洗衣服，打了一个小时游戏，看了一个小时极限挑战，已经晚上9点了。</p><p>说实话，现在只要一上课我就很头疼，我自学，都能学得比老师讲得都明白。</p><p>什么狗屁半吊子老师，讲啥讲不明白，写三行代码，找错误找10分钟，mmp的。你哪怕是课下备课，都不至于这样。</p><p>我呢，也就是为了不挂科而已，不然，谁特么听这些人的破课？</p><p>以后当个老师混日子也不错，一边混日子领工资，一边还能做自己感兴趣的事，啧啧…</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/house-fund/5.png"><p>这是后人整合鲁迅的文章，改写的诗。“从你开始学习并改变身边的人”，从我开始改变这些混日子的老师？怎么改变，除非你给我个炮弹，我把这些混日子的老师都给轰了，杀鸡儆猴。</p><p>现在上课有两种人，极好的学生，是不会听的，有的直接逃课；极差的学生，也是不会听的，也逃课。教师为了让自己的课不沦落到没人听的地步，点名，在的就给你成绩。这是不是违背了教学的初衷？</p><p><u><strong>一个好的老师，不应该强迫学生必须听你的课。你可以期中考试、期末考试，通过考试来决定学生成绩如何；而不是通过别人是否上你的课来给成绩。至于学生如何获取知识，你不需要管，因为你未必是个好老师，学生需要的是好老师。教学的初衷是为了让学生掌握更扎实的知识，有更强的能力，如果你不能给他们这些，请不要束缚他们选择老师的权利。如果说，职场是优胜劣汰，那么教师这个铁饭碗，好多人拿着不应得的薪水，有着普通人很努力也达不到的生活水准，这是不是太不公平了？</strong></u>。</p><p>我的专业课老师，群里发上课了，结果我进去，尼玛的显示下课状态。他自己随机开课，也就是我想做个按时出勤的好学生得一直刷新才行。老子8点就到了，结果还要一直刷新等尼玛的到点上课？直接脚本处理。定时8点30进入课堂，自动监测签到。管尼玛的迟不迟到，反正也不听，布置的作业我都没做。</p><p>我之前的数学老师，提前快1个小时，就把课堂打开，让学生进去，这是好老师。</p><h1 id="五、6号没进度"><a href="#五、6号没进度" class="headerlink" title="五、6号没进度"></a>五、6号没进度</h1><p>七月一号到五号，在准备英语跟数学的期末考试，所以没有进度。</p><p>从今天开始，全心全意好好整。</p><p>此处应该画一道分割线。</p><p>考完试了，也不着急去做实训，把我这小博客又优化了一下，添加了本地搜索内容加载动画。</p><p>之后，又整了个每天定时刷步数能量的脚本，这样，一天就过去咯！</p><h1 id="六、7号进度"><a href="#六、7号进度" class="headerlink" title="六、7号进度"></a>六、7号进度</h1><p>完成功能：</p><ol><li>个人开户：添加用户，需要更新单位表下的人数、单位月缴总额和个人月缴总额的数据。有两个思路<ul><li>代码完成</li><li>MySQL触发器</li></ul></li></ol><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/house-fund/7.png"><p>我采用的MySQL触发器，<a href="https://www.cnblogs.com/phpper/p/7587031.html" target="_blank" rel="noopener">学习地址</a></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> insert_trigger <span class="keyword">after</span> <span class="keyword">insert</span> <span class="keyword">on</span> tb003 <span class="keyword">for</span> <span class="keyword">EACH</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">update</span> tb002 <span class="keyword">as</span> a <span class="keyword">join</span> (<span class="keyword">select</span> unitaccnum,<span class="keyword">sum</span>(basenumber) <span class="keyword">sum</span> <span class="keyword">from</span> tb003 <span class="keyword">where</span> peraccstate=<span class="number">0</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> unitaccnum) <span class="keyword">as</span> b <span class="keyword">on</span> a.unitaccnum=b.unitaccnum <span class="keyword">set</span> a.basenumber=b.sum;</span><br><span class="line"><span class="keyword">update</span> tb002 <span class="keyword">as</span> a <span class="keyword">join</span> (<span class="keyword">select</span> unitaccnum,<span class="keyword">sum</span>(unitmonpaysum) <span class="keyword">as</span> <span class="keyword">sum</span> <span class="keyword">from</span> tb003 <span class="keyword">where</span> peraccstate=<span class="number">0</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> unitaccnum) <span class="keyword">as</span> b <span class="keyword">on</span> a.unitaccnum=b.unitaccnum <span class="keyword">set</span> a.unitpaysum=b.sum;</span><br><span class="line"><span class="keyword">update</span> tb002 <span class="keyword">as</span> a <span class="keyword">join</span> (<span class="keyword">select</span> unitaccnum,<span class="keyword">sum</span>(permonpaysum) <span class="keyword">as</span> <span class="keyword">sum</span> <span class="keyword">from</span> tb003 <span class="keyword">where</span> peraccstate=<span class="number">0</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> unitaccnum) <span class="keyword">as</span> b <span class="keyword">on</span> a.unitaccnum=b.unitaccnum <span class="keyword">set</span> a.perpaysum=b.sum;</span><br><span class="line"><span class="keyword">update</span> tb002 <span class="keyword">as</span> a <span class="keyword">join</span> (<span class="keyword">select</span> unitaccnum,<span class="keyword">count</span>(accnum) <span class="keyword">as</span> <span class="keyword">sum</span> <span class="keyword">from</span> tb003 <span class="keyword">where</span> peraccstate=<span class="number">0</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> unitaccnum) <span class="keyword">as</span> b <span class="keyword">on</span> a.unitaccnum=b.unitaccnum <span class="keyword">set</span> a.persnum=b.sum;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> update_trigger <span class="keyword">after</span> <span class="keyword">UPDATE</span> <span class="keyword">on</span> tb003 <span class="keyword">for</span> <span class="keyword">EACH</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">update</span> tb002 <span class="keyword">as</span> a <span class="keyword">join</span> (<span class="keyword">select</span> unitaccnum,<span class="keyword">sum</span>(basenumber) <span class="keyword">sum</span> <span class="keyword">from</span> tb003 <span class="keyword">where</span> peraccstate=<span class="number">0</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> unitaccnum) <span class="keyword">as</span> b <span class="keyword">on</span> a.unitaccnum=b.unitaccnum <span class="keyword">set</span> a.basenumber=b.sum;</span><br><span class="line"><span class="keyword">update</span> tb002 <span class="keyword">as</span> a <span class="keyword">join</span> (<span class="keyword">select</span> unitaccnum,<span class="keyword">sum</span>(unitmonpaysum) <span class="keyword">as</span> <span class="keyword">sum</span> <span class="keyword">from</span> tb003 <span class="keyword">where</span> peraccstate=<span class="number">0</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> unitaccnum) <span class="keyword">as</span> b <span class="keyword">on</span> a.unitaccnum=b.unitaccnum <span class="keyword">set</span> a.unitpaysum=b.sum;</span><br><span class="line"><span class="keyword">update</span> tb002 <span class="keyword">as</span> a <span class="keyword">join</span> (<span class="keyword">select</span> unitaccnum,<span class="keyword">sum</span>(permonpaysum) <span class="keyword">as</span> <span class="keyword">sum</span> <span class="keyword">from</span> tb003 <span class="keyword">where</span> peraccstate=<span class="number">0</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> unitaccnum) <span class="keyword">as</span> b <span class="keyword">on</span> a.unitaccnum=b.unitaccnum <span class="keyword">set</span> a.perpaysum=b.sum;</span><br><span class="line"><span class="keyword">update</span> tb002 <span class="keyword">as</span> a <span class="keyword">join</span> (<span class="keyword">select</span> unitaccnum,<span class="keyword">count</span>(accnum) <span class="keyword">as</span> <span class="keyword">sum</span> <span class="keyword">from</span> tb003 <span class="keyword">where</span> peraccstate=<span class="number">0</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> unitaccnum) <span class="keyword">as</span> b <span class="keyword">on</span> a.unitaccnum=b.unitaccnum <span class="keyword">set</span> a.persnum=b.sum;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> delete_trigger <span class="keyword">after</span> <span class="keyword">DELETE</span> <span class="keyword">on</span> tb003 <span class="keyword">for</span> <span class="keyword">EACH</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">update</span> tb002 <span class="keyword">as</span> a <span class="keyword">join</span> (<span class="keyword">select</span> unitaccnum,<span class="keyword">sum</span>(basenumber) <span class="keyword">sum</span> <span class="keyword">from</span> tb003 <span class="keyword">where</span> peraccstate=<span class="number">0</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> unitaccnum) <span class="keyword">as</span> b <span class="keyword">on</span> a.unitaccnum=b.unitaccnum <span class="keyword">set</span> a.basenumber=b.sum;</span><br><span class="line"><span class="keyword">update</span> tb002 <span class="keyword">as</span> a <span class="keyword">join</span> (<span class="keyword">select</span> unitaccnum,<span class="keyword">sum</span>(unitmonpaysum) <span class="keyword">as</span> <span class="keyword">sum</span> <span class="keyword">from</span> tb003 <span class="keyword">where</span> peraccstate=<span class="number">0</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> unitaccnum) <span class="keyword">as</span> b <span class="keyword">on</span> a.unitaccnum=b.unitaccnum <span class="keyword">set</span> a.unitpaysum=b.sum;</span><br><span class="line"><span class="keyword">update</span> tb002 <span class="keyword">as</span> a <span class="keyword">join</span> (<span class="keyword">select</span> unitaccnum,<span class="keyword">sum</span>(permonpaysum) <span class="keyword">as</span> <span class="keyword">sum</span> <span class="keyword">from</span> tb003 <span class="keyword">where</span> peraccstate=<span class="number">0</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> unitaccnum) <span class="keyword">as</span> b <span class="keyword">on</span> a.unitaccnum=b.unitaccnum <span class="keyword">set</span> a.perpaysum=b.sum;</span><br><span class="line"><span class="keyword">update</span> tb002 <span class="keyword">as</span> a <span class="keyword">join</span> (<span class="keyword">select</span> unitaccnum,<span class="keyword">count</span>(accnum) <span class="keyword">as</span> <span class="keyword">sum</span> <span class="keyword">from</span> tb003 <span class="keyword">where</span> peraccstate=<span class="number">0</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> unitaccnum) <span class="keyword">as</span> b <span class="keyword">on</span> a.unitaccnum=b.unitaccnum <span class="keyword">set</span> a.persnum=b.sum;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h1 id="七、8号进度"><a href="#七、8号进度" class="headerlink" title="七、8号进度"></a>七、8号进度</h1><p>完成功能：</p><ol><li>单位修改</li><li>个人修改<ul><li>反显数据</li><li>多表连接查询</li></ul></li></ol><p>多表连接查询的时候，我直接懵了。</p><p>需求是查个人数据的时候，需要将单位的数据一并反显出来。</p><p>我一开始是想查询两次，封装成Javabean，存储session。但是太麻烦了，就百度了一下，<a href="https://www.cnblogs.com/chen-lhx/p/5002026.html" target="_blank" rel="noopener">数据库采用多表连接查询，对应javaBean文件连接方式</a></p><h1 id="八、9号进度"><a href="#八、9号进度" class="headerlink" title="八、9号进度"></a>八、9号进度</h1><p>完成功能：</p><ol><li>单位查询</li><li>个人查询</li><li>单位销户<ul><li>若总人数&gt;0，则不可销户</li></ul></li><li>个人销户</li></ol><blockquote><p>销户：并没有将数据删除，而是将状态码修改为销户，在查询修改的时候，只查询状态为正常的数据</p><p>在全部内容查询的时候，需要将数据查出来。</p><p>感受：触发器真好用！</p></blockquote><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/house-fund/10.png"><p>查询需要用到分页，思路就是，创建一个Page对象，里面存储当前页码，总页码，总条数，行数，以及存储bean对象的list集合</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Page</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> totalCount;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> totalPage;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> currentPage;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> rows;<span class="comment">//每页显示记录数</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;T&gt; list;<span class="comment">//每页的数据</span></span><br><span class="line">    </span><br><span class="line">    ...getter and setter...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在jsp页面实现分页显示，类似于这样</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/house-fund/8.png"><p>在jsp页面显示中，需要用到一个begin和end值，来求出其中的应该显示的条数。我在servlet中设置了这两个值</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分页的开始跟结束</span></span><br><span class="line"><span class="keyword">int</span> visibility = <span class="number">4</span>;<span class="comment">//设置分页中间显示的个数，4就表示中间有5个</span></span><br><span class="line"><span class="keyword">int</span> totalPage = personByPage.getTotalPage();</span><br><span class="line"><span class="keyword">int</span> current = personByPage.getCurrentPage();</span><br><span class="line">current = current &gt; totalPage ? totalPage : current;</span><br><span class="line">current = current &lt; <span class="number">1</span> ? <span class="number">1</span> : current;</span><br><span class="line"><span class="keyword">int</span> begin = current - visibility / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">int</span> end = current + visibility / <span class="number">2</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 如果页数多于visibility，则按visibility正常显示</span></span><br><span class="line"><span class="comment"> * 如果页数少用visibility，则按实际情况展示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">if</span> (totalPage &gt; visibility) &#123;</span><br><span class="line">    begin = begin &lt; <span class="number">1</span> ? <span class="number">1</span> : begin;</span><br><span class="line">    end = begin + visibility;</span><br><span class="line">    end = end &gt; totalPage ? totalPage : end;</span><br><span class="line">    begin = end - visibility;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    begin = begin &lt; <span class="number">1</span> ? <span class="number">1</span> : begin;</span><br><span class="line">    end = end &gt; totalPage ? totalPage : end;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后，在jsp页面中，通过jstl来控制生成页数</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">"pagination pagination-sm pull-right mt-3"</span>&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href="findPersonByPage?currentPage=1"&gt;首页&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;c:forEach begin=<span class="string">"$&#123;requestScope.begin&#125;"</span> end=<span class="string">"$&#123;requestScope.end&#125;"</span> step=<span class="string">"1"</span> <span class="keyword">var</span>=<span class="string">"i"</span>&gt;</span><br><span class="line">        &lt;li$&#123;requestScope.personByPage.currentPage==i?" class=\"active\"":""&#125;&gt;&lt;a href="findPersonByPage?currentPage=$&#123;i&#125;"&gt;$&#123;i&#125;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/c:forEach&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href="findPersonByPage?currentPage=$&#123;requestScope.personByPage.totalPage&#125;"&gt;尾页&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><p>本来还有几个功能，我看得很懵逼，问问老师，老师说不用实现了，那我就不客气了，下班，哈哈</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/house-fund/9.png"><p>写完这些的时候，一看时间</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" data-original="/blog/2020/house-fund/6.png"><p>在使用过程中，还碰到了ssl的问题，解决方案<a href="https://blog.csdn.net/qq_38454176/article/details/104066348" target="_blank" rel="noopener">在这</a></p></div><div class="post-detail">发布：2020-06-29 16:20:13<br>修改：2020-07-10 12:04:26<br>链接：<span class="shareUrl">https://meethigher.top/blog/2020/house-fund/</span><br>标签：<span><a href="/blog/tags/open/">open</a>&nbsp;<a href="/blog/tags/web/">web</a>&nbsp;<a href="/blog/tags/jsp/">jsp</a>&nbsp;</span></div><div class="post-btn"><img no-lazy src="/blog/images/alipay.png" style="display:none" alt="付款码"> <span class="post-donation-btn">捐助</span> <span class="post-share-btn">分享</span></div><div class="post-comment"><span class="instruction">翻墙之后才能评论哦</span><div id="gitalk-container"></div></div><link rel="stylesheet" href="/blog/css/gitalk.css"><script src="/blog/js/gitalk.js"></script><script type="text/javascript">var gitalk=new Gitalk({clientID:"84249c02e216e3ce376a",clientSecret:"a032ae7096d026eff848b5815da5afde341e9ffd",repo:"meethigher.github.io",owner:"meethigher",admin:["meethigher"],id:location.pathname,distractionFreeMode:"true"});gitalk.render("gitalk-container")</script><div class="busuanzi"><span id="busuanzi_container_page_pv">阅读量<span id="busuanzi_value_page_pv"></span>次</span><script defer src="/blog/js/busuanzi.js"></script></div></article><div class="outline" title="目录"><span class="fa fa-list-alt"></span></div></div></main><script src="https://cdn.jsdelivr.net/gh/meethigher/cdn@9.0/js/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/meethigher/cdn@11/js/layer/layer.js"></script><script src="https://cdn.jsdelivr.net/gh/meethigher/cdn@13/js/instantpage.js"></script><script src="/blog/js/meethigher.js"></script><script>let imgs = $(".post-content.blog-markdown img");imgs.css("width", "100%");</script><script>window.imageLazyLoadSetting={isSPA:!1,processImages:null}</script><script>window.addEventListener("load",function(){var a=/\.(gif|jpg|jpeg|tiff|png)$/i,e=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll(".blog-markdown img[data-original]")).forEach(function(t){var r=t.parentNode;"A"===r.tagName&&(r.href.match(a)||r.href.match(e))&&(r.href=t.dataset.original)})})</script><script>!function(t){function e(){n&&(o=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var e,i,r=0;r<o.length;r++)e=o[r],0<=(i=e.getBoundingClientRect()).bottom&&0<=i.left&&i.top<=(t.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,n,i,a=o[r];t=a,e=function(){o=o.filter(function(t){return a===t&&t.removeAttribute("style"),a!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}()}t.imageLazyLoadSetting.processImages=e;var n=t.imageLazyLoadSetting.isSPA,o=Array.prototype.slice.call(document.querySelectorAll(".blog-markdown img[data-original]"));e(),t.addEventListener("scroll",function(){var n,o;n=e,o=t,clearTimeout(n.tId),n.tId=setTimeout(function(){n.call(o)},500)})}(this)</script></body></html>